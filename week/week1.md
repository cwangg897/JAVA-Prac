## 1주차
<https://github.com/whiteship/live-study/issues/1#issue-738266603>

### 목표
자바 소스 파일(.java)을 JVM으로 실행하는 과정 이해하기.

### 학습할 것
- JVM이란 무엇인가
- 컴파일 하는 방법
- 실행하는 방법
- 바이트코드란 무엇인가
- JIT 컴파일러란 무엇이며 어떻게 동작하는지
- JVM 구성 요소
- JDK와 JRE의 차이

### JVM(Java Virtual Machine)이란 무엇인가
JVM은 어느 OS이던지 자바 프로그램을 실행할 수 있도록 도와주는 프로그램 <br>
Java Byte Code를 OS에 맞게 해석 해주는 역할을 합니다. <br>
Byte Code는 JVM 위에서 OS상관없이 실행된다. <br>
JVM 은 운영체제 위에서 작동하며 자바 프로그램과 운영체제 사이에서 일종의 인터페이스 역할을 수행해 자바 프로그램이 운영체제나 디바이스에 종속되지 않도록 하였다.<br>

### 컴파일 하는 방법
컴파일을 위해선 컴파일 작업을 수행할 java compiler가 필요하다. java comiler는 jdk를 설치하면 bin 폴더안에 javac 라는 이름으로 설치된다. <br>
<code>javac fileName.java</code> javac 라는 명령어 주요 옵션들도 추가할 수 있다 <br>
javac fileName.java 수행하면 fileName.class이 만들어진다. <br>



### 실행하는 방법
<code>java fileName.class</code>
단 중요한것은 실행을 위해서는 바로 main메소드가 있어야한다. <br>

<pre>
위 명령어로 실행할 때 JVM의 구성요소인 클래스로더가 fileName.class 파일을 메모리상의 JVM으로 가져온다.
내부적으로는 classLoader -> Byte Code Verifier (바이트코드 변조 확인) -> Execution Engine에서 실행되는 구조다.
Execution Engine에서 클래스파일(바이트코드로 구성)을 기계어로 변경해서 명령어 단위로 실행한다.
다만 명령어 단위 실행은 2가지 방식으로 동작한다.
</pre>
<img src="https://user-images.githubusercontent.com/79621675/157780542-62463981-13e1-4902-ab0b-6f59e81f1e7c.png" width=500>

#### 컴파일
컴파일 하는 방법
자바에서는 사실 두가지 컴파일러가 있다. 위 그림에서 보이는 java compiler(javac), 그리고 JIT 컴파일러이다.

#### java compiler
흔히 javac라는 명령어로 사용하는 자바 컴파일러가 우리가 자바 소스코드를 빌드하면 생기는 .class 파일을 만들어준다. 하지만 사람이 읽을 수 있는 코드를 기계가 읽을 수 있는 코드로 바꿔주는 일반적인 컴파일러와는 달리, .class 파일(바이트코드)은 아직 기계가 읽을 수 없다.

실제로 jvm을 통해서 바이트코드가 메모리상에 올라갈때 기계어로 바뀌게 된다.

#### jit compiler
jit(just in time) 컴파일러는 jvm 의 구성 요소로, 바이트코드를 바이너리로 컴파일하는 역할을 한다.



### 바이트코드란 무엇인가
바이트코드란 .class라는 파일로만든건데 jvm에서 os에 상관없이 알수있도록 만든것이고 바이트코드를 이제 jit컴파일러를통해서 읽어서 바이너리 코드로 만듭니다 바이너리코드는 0과 1로이루어져있습니다. 이상 저의 지식이었습니다. <br>
<pre>
자바 가상 머신이 이해할 수 있는 언어로 변환된 자바 소스 코드, 자바 컴파일러로 변환되는 코드의 명령어 크기가 1바이트라서 바이트코드라고 불린다고 한다.
다시 풀어서 이해하자면 자바는 OS에 종속적이지 않기 위해서 JVM 이 이해할 수 있는 언어인 바이트코드 형태로 제공되고 바이트코드와 JVM이 있으면 어느 운영체제에 종속적이지 않고 실행된다고 이해하면 된다.
(실제로 .java 파일은 확장자가 java인 단순 텍스트 파일임)
</pre>



### JIT 컴파일러란 무엇이며 어떻게 동작하는지
Just-In-Time 컴파일러로 인터프리터 방식이다. 인터프리터방식은 한줄읽고 한줄 해석하는 방식인데 이렇게하면 실행속도가 느리기떄문에 이걸보완하기위해 JIT컴파일러가
이제 해석해놓다가 필요할때 컴파일러인데 원래 인터프리터는 한번 똑같은내용이나와도 한번더사용했지만 JIT컴파일러는 캐싱을 해놓아서 한번또나오면 캐싱한걸 사용할수있다. 이상 제지식입니다. <br>
<pre>
인터프리터 방식 : 인터프리터는 한줄씩 바이트코드를 읽어서 바이너리로 컴파일하고 실행한다.
한줄씩 컴파일하는 인터프리터의 단점을 보완하기 위해 존재하는 JIT 컴파일러는 전체 바이트코드를 한번에 컴파일한 뒤, 캐싱해둔다. 
나중에 캐싱해둔 바이트코드를 다시 사용할 경우, 재컴파일 하지 않는다. 
 단, 처음 컴파일 시간이 길기 때문에 여러번 사용된다고 판단한 코드에 한해 JIT 컴파일러가 동작한다.
</pre>


### JVM 구성 요소
<https://gblee1987.tistory.com/173>

#### 메모리
메모리 관리 - 자바는 언어 차원에서 메모리를 관리해주는 managed language이다. Garbage Collector 는 참조 카운트를 관리하는 등의 방법으로 힙 영역의 객체들을 모니터링하다가, 더 이상 필요없어진 객체들을 해제한다. GC의 동작에 관한 자세한 내용은 다음에 다시 정리하자. <br>


### JDK와 JRE의 차이
<img src="https://user-images.githubusercontent.com/79621675/157782938-52884d23-6679-4158-9a8e-e9aaec3dbda2.png" width=500>
<pre>
jvm 만 가지고는 자바 소스코드를 실행시킬 수 없다. jvm은 실제 돌아가는 프로그램이 아니라 자바 소스를 실행하기 위한 인터페이스(명세)에 가깝기 때문이다. 실제로 작동하는 것은 JRE(java runtime environment)이다. 즉, jre 는 jvm의 구현체이다. 위에서 말한 클래스로더, gc등의 실제 코드들과, java 시스템 라이브러르 코드등이 합쳐져 있다.
실제 바이트코드를 실행하는 데는 jre만 있으면 된다.

JDK
그렇지만 자바로 프로그램을 만들기 위해서는 JDK가 있어야 한다. JDK는 JRE + 개발을 위한 도구들 이라고 보면 된다. 넓은 범위에서는 인텔리제이 같은 복합 개발자도구도 jdk라고 볼 수 있다. 암튼 개발자들은 jdk를 설치하면 된다.
java compiler도 jre 가 아닌 jdk에 속해있다.
</pre>
